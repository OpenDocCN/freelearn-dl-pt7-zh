<html><head></head><body>
        <section>

                            <header class="header-title chapter-title">
                    Predicting the Future of Investment Bankers
                </header>
            
            <article>
                
<p class="mce-root"><span>In the previous chapter, we understood the basic financial and capital market concepts. We looked at how AI can help us in optimizing the best capital structure by running risk models and generating sales forecasts using macro-economic data. We also looked at how useful AI is while planning the financial internals of an organization and external investors' communication. We then looked at two examples – the first regarding how to optimize the funding mix of debt and equity and the second regarding performing a financial forecast that could help us with financially planning capital demand.</span></p>
<p>The goal of this chapter is to <span>introduce additional techniques that can be used for financial planning. You will learn how to perform auto syndication for new issues so that the capital can be obtained from the interested investors. Then, you will learn how to identify acquirers and targets, a process that requires a science background so that you can pick the ones that need the banking services the most.</span></p>
<p><span>In this chapter, we will cover the following topics:</span></p>
<ul>
<li>Basics of investment banking</li>
<li>Understanding data technologies</li>
<li>Clustering models</li>
<li>Auto syndication for new issues</li>
<li>Identifying acquirers and targets</li>
</ul>
<p>Let's get started!</p>
<h1 id="uuid-e2d59f0a-e214-4bf8-8890-6d305f72ef66">Basics of investment banking</h1>
<p>Investment banking will be the focus of this chapter. Therefore, you will need to understand a few basic concepts surrounding investment banking. We will begin by understanding the challenges of an <strong>Initial Public Offer</strong>, commonly known as an <strong>IPO</strong>. When a company decides to go to the stock market in order to acquire money from the public, they release an IPO for the public and institutions to subscribe to. We will also understand the concepts of M&amp;A, as well as how to classify investors and apply AI to mergers and acquisitions.</p>
<h2 id="uuid-b5e78dfe-1ada-47aa-b172-66df00ba1851">The job of investment bankers in IPOs</h2>
<p>The following are some of the core problems that investment bankers deal with:</p>
<ul>
<li><strong>Pricing:</strong><span> </span>What is the right price for the new issuance (of equity)?</li>
<li><strong>Syndication:</strong><span> </span><span>Who should we distribute the shares to and at what price?</span></li>
<li><strong>Listing:</strong><span> </span><span>How can we register these shares with the markets (such as stock exchanges) so that they pass all the requirements as investment security in the market?</span></li>
</ul>
<p>Let's answer each of these questions, one by one.</p>
<p>To answer the first question, in the previous chapter, we briefly illustrated how to correctly model the capital structure of the company, including its financial position. The core of this remains how to estimate the drivers when given some macro indicators that matter to the company concerned.</p>
<p>To answer the second question, it makes a difference if we have visibility of the investment preference of the market. When the investment decision on investors is automated by the robot adviser, we should find it easy to test the demand of the investors represented by the robot. The robot needs parameters on the investment, while lots of these projections are made by an investment bank's engine; that is, its past accuracy shall also be considered when accessing information (also known as <strong>the prospectus</strong>) about potential issues. We will address this question in the first example we will complete in this chapter.</p>
<p>The third question focuses a lot on reporting and filing information regarding the legitimacy of the company's ownership and legal status, as well as its risk factors. When this issue is executed by a robot, there will be different requirements from the regulator/stock exchange:</p>
<ul>
<li>There should be a robot from the regulator/stock exchange side to validate the claims of the filing company. Here, a robot indicates an intelligent software program that can perform specific tasks meant for it. However, it may even be possible for the listing company's CFO to upload their sales forecast as per what we discussed in <a href="0c281efb-a1b8-423f-976b-0fa47f5da990.xhtml">Chapter 4</a>, <em>Mechanizing Capital Market Decisions</em>. The material factor that impacts the sales of an electricity company is the weather, given that it is highly predictive of its sales.</li>
<li>Besides factors related to its sales, risk factors include other macroeconomics variables that impact the major financial items of financial statements. Factors sensitive to the firm's strategies will be covered in the second example of <a href="d29ff3a8-3879-4d50-8795-a39bae5cc793.xhtml">Chapter 7</a>, <em>Sensing Market Sentiment for Algorithm Marketing at the Sell-Side</em>. We will do this here since the investor-side also influences the important topics that need to be focused on.</li>
</ul>
<h2 id="uuid-c23f1978-5fcf-486a-b3a5-cb63dcb26903">Stock classification <span>– </span>style</h2>
<p>There are two schools of thought when it comes to classifying stocks: one based on qualitative features and another based on quantitative features. We will be focusing on the qualitative approach, which is called <strong>style</strong>. An example of such a scheme is <em>Morningstar Style Box</em> (<a href="http://news.morningstar.com/pdfs/FactSheet_StyleBox_Final.pdf">http://news.morningstar.com/pdfs/FactSheet_StyleBox_Final.pdf</a>).</p>
<p>Here, we can look at the sector/industry, the size of the stocks, the riskiness of the stock, the potential of the stock, and so on. There are many ways to create features and classify stocks. We will use sector and size as the features for qualitative classification in this chapter.</p>
<p>The quantitative approach (for example, <strong>arbitrage pricing theory</strong> (<strong>APT</strong>)) groups stocks that contain similar factors together analytically.</p>
<h2 id="uuid-57a7a76f-a165-471c-a11f-215dec791d74">Investor classification</h2>
<p>Like stock classification, there are both quantitative and qualitative approaches. Qualitative could be based on the type of money (pension, sovereign wealth, insurance, and so on), strategies (long-short, global macro, and so on), underlying holdings (futures, commodities, equities, bonds, and private equities), riskiness, and so on. Quantitative could be based on proximate factors that these investors are based on. In the first example of this chapter, we will use investment riskiness and return as the features for qualitative classification.</p>
<h2 id="uuid-125d4acb-7a84-4ba6-ab9e-2fed6561abe8">Mergers and acquisitions</h2>
<p><span>Investment banking covers not just listing securities but also advisory services such as <strong>mergers and acquisitions</strong> (<strong>M&amp;A</strong>), financial opinions such as company valuation, and other event-driven financing operators such as management buyout. In short, all these activities deal with buying and selling companies and/or company assets and pricing them correctly. </span>The easiest way to understand this is by thinking about property brokers, appraisers, and mortgage bankers in terms of buying a house. M&amp;A is like two people getting married <span>– </span>sometimes, one will be more dominant, while other times, it is a marriage of two equal entities. The rationale behind this is that a firm exists because it is more efficient to operate, as theorized by Ronald Coase in 1937. As technologies, regulations, and consumer preferences change, the economic boundary of a firm changes too, which makes the case for M&amp;A.</p>
<p>We are largely talking about the following types of transactions:</p>
<ul>
<li>Acquisition (acquiring another firm)</li>
<li>Merger (two or more firms combine)</li>
<li>Divestiture (sell itself)</li>
<li>Spin-off (selling part of the firm), and so on</li>
</ul>
<p>Another dimension of classifying M&amp;A is done through the pre-deal relationship between the acquirers and the target: if they are both in the same industry, this is called <strong>horizontal integration</strong>; if they are in a supplier-customer relationship, this is called <strong>vertical integration</strong>; when neither of them are linked, this is called <strong>diversification</strong>.</p>
<p>As an investment banker, these are the key areas you need to look into:</p>
<ul>
<li><strong>Predeal matter</strong>: Ensure the commitment/willingness of the acquirer and the target to embark on a journey together to explore a deal.</li>
<li><strong>Approvals</strong>: Approval by regulators or existing shareholders.</li>
<li><strong>Postdeal matter</strong>: Deliver 1 + 1 &gt; 2. This is not because of bad math; this is because certain processes are more integrated to deliver better results. So, when two entities (companies) are added together, the cost will be lower or the revenue will be higher.</li>
</ul>
<p>According to the guide for dummies (<a href="https://www.dummies.com/business/corporate-finance/mergers-and-acquisitions/steps-of-the-ma-process/">https://www.dummies.com/business/corporate-finance/mergers-and-acquisitions/steps-of-the-ma-process/</a>), an M&amp;A deal can be summarized with the following steps:</p>
<ol>
<li>Contact the targets</li>
<li>Exchange documents and pricing</li>
<li>Conduct due diligence</li>
<li>Close the deal</li>
<li>Perform post-deal integration</li>
</ol>
<p>Next, we'll look at the application of AI in M&amp;A.</p>
<h2 id="uuid-09061dba-eb70-4223-9839-7e0c4028213e">Application of AI in M&amp;A</h2>
<p>With regard to the application of AI for bankers, AI is used to identify the right target and help quantify the pricing for post-deal synergies. Both of these steps (the first and the last step) are highly unreliable under the existing setting, where there is not much science involved. Firstly, bankers' time is very expensive, while the mortality rate of any prospection deal is very high (for example, 90%). Clients (buyer/seller) will have the incentive of maximizing the banker's service hours, even though no deal may be closed. Given the banker's limited time and clients' conflicting goal of maximizing the banker's time, regardless of their actual intention to close any deal, the best approach is to find the actual economics derived from the M&amp;A deal. If it works fundamentally, there shall be a higher urgency to announce and engage the investment bankers on deal execution/announcement.</p>
<p>The modeling approach actually exists today in credit risk modeling, which we mentioned in the previous chapters. Given the financials, we predict a binary outcome regarding whether an event occurs or not. In the case of the credit risk model, there is bankruptcy occurrence within <em>X</em> years; whereas, for mergers, it could be an acquisition or divestment announcement within <em>X</em> years given the financials. I personally do not see any difference between these modeling approaches if the probability of bankruptcy can be estimated as such.</p>
<p>Secondly, when it comes to quantifying post-deal synergies, there is either cost-efficiency, revenue growth, or higher productivity with a better mix of knowledge transfer by the staff:</p>
<ul>
<li>When it comes to cost-efficiency, we can easily run the sales analysis for the cost relationship in the industry to quantitatively validate whether it is the actual behavior of the industry or just some wishful thinking that the suppliers will accept lower payment from the combined company.</li>
<li>With regard to revenue synergies, this is a massive data exchange exercise and can only be done with proper machine learning models. For example, if the synergy is about better market access (for example, competitor A, a buyer, buying competitor B in the same industry), the targeting model of competitor A shall be run on competitor B's customer database to derive how much revenue will likely be generated. This happens with joint database marketing programs; for example, insurance distributed via banks (<strong>Bancassurance</strong>). Here, the insurers provide the model to run on the bank's customer database.</li>
<li>For know-how related to human resources synergies, I see an equal possibility of applying HR analytics to measure and quantify knowledge, skill level and cultural fitness, and team performance. The hard and soft side of the staff shall be measured, projected, and simulated in the pre-due synergy analysis.</li>
</ul>
<div class="packt_infobox">To do this, I do not believe that any existing M&amp;A banker would be willing to change much because the time spent on doing this would be rather long given that, right now, the extent of digitalization for customers and staff is not yet mainstream. This means that features and models can't do this. But I do believe that we should work on this future model of M&amp;A, especially now that we are building the future of M&amp;A and training the next generation.</div>
<p>Compared to a financial investment, M&amp;A has a huge uncertainty in terms of it operational integration, which is exactly where AI should deliver value. Numerous studies have been conducted on the determinant factors of a successful M&amp;A deal that deliver the promised synergies; these findings or features from academic researches need to be collected and run through in order to generate a quantifiable success likelihood and will be priced while calculating the offering price.</p>
<h2 id="uuid-85700887-d0d7-4b23-bde3-58d751610b67">Filing obligations of listing companies</h2>
<p>To ensure there are fair markets for the investors of publicly listed securities, the exchange requires that we announce the occurrence of events such as the release of financial results, major company activities that affect the valuation of security, and so on. For example, you can refer to the <em>New York Stock Exchange's<span> </span>IPO guide</em> (<a href="https://www.nyse.com/publicdocs/nyse/listing/nyse_ipo_guide.pdf">https://www.nyse.com/publicdocs/nyse/listing/nyse_ipo_guide.pdf</a>).</p>
<h1 id="uuid-92ca8bcd-c69e-4e5f-b88a-9a142300cdab">Understanding data technologies</h1>
<p>We are going to manage a large amount of data through the examples in this chapter. Due to this, it is critical to understand the underlying data technologies that we will use. These data technologies are related to storing varying types of data and information. There are two challenges related to information storage <span>– </span>first is the physical medium that we use to store the information, while the second is the format in which the information is stored.</p>
<p><span>Hadoop is one such solution that allows stored files to be physically distributed. This helps us to deal with various issues such as storing a large amount of data in one place, backup, recovery, and so on. In our case, we store the data on one computer as the size does not justify using this technology, but the following NoSQL databases could support this storage option. In Python, there is another file format called <strong>HDF5</strong>, which also supports distributed filesystems.</span></p>
<p><span>While NoSQL databases can be used, the reason why I am not using them in this chapter can be explained with the help of t</span>he following table, which compares SQLite, Cassandra, and MongoDB side by side:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td class="CDPAlignCenter CDPAlign"/>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>Pros</span></strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>Cons</span></strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>Conclusions</span></strong></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>SQLite</span></strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>Structured data format, compatible with DataFrames</span></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>Cannot save unstructured data.</span></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>We need this for simplicity.</span></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>Cassandra</span></strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>Can run at distributed computing and can put in structured data (with fields as items)</span></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>When dealing with structured data, the syntax is not straightforward to insert.</span></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>We can't use these for our case as we aim to cluster similar investors and predict who will buy our new issues in IPO.</span></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p><strong><span>MongoDB</span></strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>Can handle huge data sizes and parallel processing of different records at scale</span></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><span>Not suitable for fully structured data such as trading records; still need to convert it into a DataFrame before running any machine learning algorithm.</span></p>
</td>
<td class="CDPAlignCenter CDPAlign"/>
</tr>
</tbody>
</table>
<p> </p>
<p class="mce-root"><span>Through this analysis, we see that it may not be necessary to have a NoSQL database for the sake of being cutting-edge. In the case of capital markets, where data is quite structured, it could be more efficient to use a SQL database that fits this purpose.</span></p>
<h1 id="uuid-7da6f33a-c616-46b2-8c17-3919f30c25fb">Clustering models</h1>
<p>Before we start looking at the programming content, let's take a look at clustering models, since we will be using one in our first example.</p>
<p class="TableContents">Clustering seeks to group similar data points together. As a simple example, when there are three data points, each with one column, [1],[2],[6], respectively, we pick one point as the centroid that represents the nearby points; for example, with two centroids, [1.5] and [5], each represents a cluster: one with [1],[2] and another cluster with [6], respectively. These sample clusters can be seen in the following diagram:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1146 image-border" src="assets/2f21f591-124f-4c8c-8f59-efb073d7db10.png" style="width:29.25em;height:7.00em;"/></p>
<p class="TableContents">When there are two columns for each data point, the distance between the actual data point and the centroid needs to consider the two columns as one data point. We adopt a measurement called <strong>Euclidean distance</strong> for this.</p>
<p class="TableContents">One of the key challenges of adopting clustering in banking is that it leads to clusters that are too large, which reduces the true positive rate if all the clusters are targeted. As per my experience, I would use it for preliminary data analysis to understand the major dynamics of the target populations, not necessarily to draw actionable insights that make economic sense in a wholesale banking setting. In our example, we will create lots of clusters with the very stringent requirement that the distance of each data point from the centroid averages a 5% deviation.</p>
<p class="TableContents">Another key question regarding the clustering algorithm is determining how many features we feed it. We could commit bias clustering by overweighing certain types of financial ratios (for example, using two different kinds of profitability ratios, such as return on equity and return on asset) for clustering. The solution to this is to run principle component analysis, which removes similar features by merging them into the same feature.</p>
<div class="packt_infobox"><span>For a non-finance/banking example, you can refer to </span><em>Building Recommendation Engines</em><span> by Suresh Kumar Gorakala (<a href="https://www.packtpub.com/big-data-and-business-intelligence/building-practical-recommendation-engines-part-1-video">https://www.packtpub.com/big-data-and-business-intelligence/building-practical-recommendation-engines-part-1-video</a>).</span></div>
<h1 id="uuid-3ba48e22-7841-41af-b59a-2eabbc4b7f8a" class="">Auto syndication for new issues</h1>
<p style="font-weight: 400">If there are issues, there are investors behind them. Traditional investment banks will hire a group of professionals called the <strong>syndication desk</strong> to handle the allocation of security issues to investors who can buy these shares and bonds.</p>
<p style="font-weight: 400">If we consider the role of the syndication desk of the investment bank, our work will be to identify the cornerstone investors of the upcoming new issues with Duke Energy, as the CFO has the funding needs in equities. To do so, we will use the institutional holding data of US stocks from SEC filing via Quandl/Sharadar, which will help us find out the investment preferences of investors who share similar interests and match those with the investors who also hold similar stocks, such as Duke Energy.</p>
<p style="font-weight: 400">With regard to who to sell to, we will take the largest investors of US stocks as our universe of investors. The syndicated desk's job is to sell the major position of any equity issues to these investors. Using the unsupervised learning method, we recommend the relevant stocks to the right investors as an initial public offering. This can be done using securities similarities (called <strong>holding similarities</strong>) and investment styles (called <strong>investor similarities</strong>).</p>
<h2 id="uuid-1fe15a1b-697c-4fe5-ba49-c646113f5913">Solving the problem</h2>
<p>The following diagram shows the steps involved in solving the problem at hand:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1014 image-border" src="assets/5cb115b5-6a49-4cfe-8fde-5ffb40358ddd.png" style="width:153.67em;height:116.17em;"/></p>
<p>We will cover each step in detail in the following sections.</p>
<h3 id="uuid-937a043a-76ee-4781-af58-6a80e04aef51">Building similarity models</h3>
<p><span>Here, we will build two similarity models – one on stock similarity and another on finding similar investors. Both models are clustering models, and they belong to the last type of machine learning approach – unsupervised learning</span><span>. We have picked 21 financial ratios to build the clustering model at the stock level, while for the investor model, we have a maximum of 60 features (<em>six capitalization sizes * five investment decisions * two types of indicators</em>):</span></p>
<ul>
<li>Six capitalization scales: Nano, Micro, Small, Medium, Large, and Mega</li>
<li>Five investment decisions: Two for Buy (New, or Partial), one for Hold, and two for Sell (All or Partial)</li>
<li>Seven indicators: Quarterly return (total return, realized, unrealized), new money changing rate's mean and standard deviation, and current value</li>
</ul>
<p class="mce-root">Import all the relevant libraries and then load the ticker's universe by reading the CSV files together with the scale fields that describe the stocks. To reduce the processing time, load the investor lists instead of all the investors. For each investor, calculate the direction per market segment stock (that is, we use scale as the only market segment, but in reality, we should use country × industry <span>×</span> scale).</p>
<h3 id="uuid-da64f948-b840-4227-9db3-7743a62a082b">Building the investor clustering model</h3>
<p>To build an investor clustering model, loop through the investors and calculate the movement and the profit (realized and unrealized profit), as follows:</p>
<ol>
<li>Import the required libraries and data:</li>
</ol>
<pre style="padding-left: 60px">'''************************<br/>Load Data<br/>'''<br/>#import relevant libraries<br/>import quandl<br/>from datetime import date,timedelta<br/>import pandas as pd<br/>import os<br/><br/>#load tickers universe and description field (scale)<br/>...<br/><br/>#loop through investors<br/>...<br/><br/>for investor in investorNameList:<br/>   ...<br/>   #calculate the change in position by ticker on <br/>    Quarter-to-quarter basis<br/>   ...<br/> <br/>   #qualify investor's activities<br/>   print('classify investor decision')<br/>   ...<br/>   #output the ticker’s activities of the investor</pre>
<ol start="2">
<li>Prepare the investor <span>profiles:</span></li>
</ol>
<pre style="padding-left: 60px"><span>## Prepare investor Profile'''<br/></span><span>#load relevant libraries<br/></span><span>import </span>os<br/><span>import </span>pandas <span>as </span>pd<br/><span>import </span>numpy <span>as </span>np<br/><span>from </span>time <span>import </span>time<br/><span>from </span>sklearn <span>import </span>metrics<br/><span>from </span>sklearn.cluster <span>import </span>KMeans<br/><span>from </span>sklearn.preprocessing <span>import </span>StandardScaler<br/><span>import </span>pickle<br/><br/>...<br/><br/><span>#Summarize quarterly performance of investors per quarter<br/></span>...<br/><span>for </span>file <span>in </span>file_list:<br/>    ...<br/>    <span>for </span>index, row <span>in </span>tmp_pd.iterrows():<br/>        ...<br/><br/>    <span>#calculate return (realized, unrealized and new money)<br/></span><span>    </span>...</pre>
<ol start="3">
<li>Prepare the cluster i<span>nvestors, as well as the output clusters and results:</span></li>
</ol>
<pre style="padding-left: 60px"><span>## Cluster investors<br/></span><span>#cleansed and transform data for clustering<br/></span>...<br/><br/>sc_X = StandardScaler()<br/>X = sc_X.fit_transform(investor_pd)<br/><br/><span>#define the k means function<br/></span><span>def </span>bench_k_means(<span>estimator</span>, <span>name</span>, <span>data</span>):<br/>    ...<br/><br/><span>#try out different K means parameters and find out the best parameters<br/></span>...<br/><br/><span>for </span>num_cluster <span>in </span><span>range</span>(<span>5</span>, <span>500</span>):<br/>    KMeans_model = KMeans(<span>init</span>=<span>'k-means++'</span>, \<br/>                          <span>n_clusters</span>=num_cluster, <span>n_init</span>=<span>10</span>)<br/>    ...<br/><br/><span>## Output the results<br/></span><span>#Output clusters</span></pre>
<p>Here, we run clustering analysis on the features that list the realized and unrealized return by market. Then, we set a threshold of 0.05, which means that the clusters that we build have to have 5% variation across the feature variables. Finally, we output the clustering results; that is, the clustering results, the clustering model, and the scaler.</p>
<h3 id="uuid-9c7199bc-4305-4065-bf8d-334a0d8b28b6">Building the stock-clustering model</h3>
<p>To build the stock-clustering model, we will load the data, prepare the stock's profile, cluster the stock, and output the clusters and results:</p>
<ol>
<li>Load the industry, tickers, and functions and import the libraries and the KPI key for Quandl:</li>
</ol>
<pre style="padding-left: 60px">'''*************************************<br/>i. load industry, tickers and functions<br/>'''<br/>#import libraries<br/>import quandl<br/>import pandas as pd<br/>import numpy as np<br/>import os<br/>from time import time<br/>from sklearn import metrics<br/>from sklearn.cluster import KMeans<br/>from sklearn.preprocessing import StandardScaler<br/>import pickle<br/><br/>#KPI keys<br/>...<br/><br/>...</pre>
<ol start="2">
<li>Use <kbd>sklearn</kbd> to run the training models. Use <kbd>pickle</kbd> to load up the results and models. Then, download the fundamental data of the ticker for the latest annual financials:</li>
</ol>
<pre style="padding-left: 60px">#define important functions<br/>#download fundamental data of the ticker<br/>def download_tkr(tkr):<br/>    ...</pre>
<ol start="3">
<li>Define the required <em>k</em> means clustering functions. Filter the industry by using tickers exceeding a cutoff. Here, we will use 100 tickers as the cutoff. When assessing the industry, we list the clusters in the industry. Then, download the financial data from the industry that passes this threshold. For each of the tickers in the industry cluster, clean the data type:</li>
</ol>
<pre style="padding-left: 60px">#kmean clustering function<br/>def bench_k_means(estimator, name, data):<br/>    ...<br/><br/><br/>'''*************************************<br/>#2a. load data<br/>'''<br/>#parameters<br/>...<br/><br/>'''*************************************<br/>#i. filter the industry in scope<br/>'''<br/>...<br/><br/>#collect tkr in each industry<br/>for index, row in df_tkr.iterrows():<br/>    ...</pre>
<ol start="4">
<li>Then, calculate the clustering model of the industry. The maximum number of clusters should be half of the total number of tickers in the industry. The clustering model will stop if it reaches the maximum silhouette score of 5%, which is the target, or when it reaches <em>N</em>/2 clusters (<em>N</em> = number of tickers in the industry):</li>
</ol>
<pre style="padding-left: 60px">'''*************************************<br/>#ii. create a dataframe for each industry to do clustering<br/>'''<br/>...<br/>#loop through the industry<br/>for ind, list_tkr in dict_ind_tkr.items():<br/>    ...<br/>    #Go through the ticker list to Download data from source<br/>    #loop through tickers from that industry<br/>    for tkr in list_tkr:<br/>        ...<br/>    <br/>    '''*************************************<br/>    2b. prepare features for clustering for the industry<br/>    '''<br/>    #convert to float and calc the difference across rows<br/>    ...<br/>    '''*************************************<br/>    2C. Perform K means clustering for the industry<br/>    '''<br/>    #clustering        <br/>    sc_X = StandardScaler()<br/>    X = sc_X.fit_transform(df_fs_filter)<br/><br/>    ...<br/>    for num_cluster in range(5, max_clsuter):<br/>        KMeans_model = KMeans(init='k-means++', \<br/>                              n_clusters=num_cluster, n_init=10)<br/>        ...</pre>
<ol start="5">
<li>Output the scalar, clus<span>tering model, and the result of clustering:</span></li>
</ol>
<pre>    '''*************************************<br/>    2D. Output the clustering model and scaler for the industry<br/>    '''    <br/>    #Output clusters<br/>    ...</pre>
<p>By adopting the methodology we developed in the previous chapter on financial projection, we can derive the financial statements and hence the financial ratios used for classifying the stock later.</p>
<p>In the example we looked at in the previous chapter, we projected the capital structure after issuing debt and equity. But to begin with, we did not assume any movement in stock price, for example, P/E ratios, except movement in profitability, scale, and so on.</p>
<p>To forecast the financials of the new stock, perform the following steps:</p>
<ol>
<li><span>Import all the relevant libraries and use <kbd>pickle</kbd> to load the results and models:</span></li>
</ol>
<pre style="padding-left: 60px">#import relevant libraries<br/>import os<br/>import pickle<br/>import math<br/>import numpy as np<br/>import pandas as pd<br/>import quandl<br/><br/><br/>...</pre>
<ol start="2">
<li>Leverage the program we built in the previous chapter and run the financial projection defined in the preceding section. Then, calculate the metrics of the projected financials for the company to be listed:</li>
</ol>
<pre style="padding-left: 60px">#perform financial projection<br/>#reuse the function developed for WACC optimization<br/>def cal_F_financials(record_db_f, logreg, logreg_sc, new_debt_pct, price_offering, levered_beta, sales_growth, coefs, r_free):<br/>    ...<br/><br/><br/>'''*****************************<br/>Step 2: Simulate financial of the new stock<br/>'''<br/>...<br/><br/>#load credit model built previously<br/>...<br/><br/>#reuse the parameters developed from WACC example<br/>...<br/><br/>#assume that we are raising equity for the same client<br/>...<br/><br/>#run simulation / projection of financial data<br/>...</pre>
<p style="font-weight: 400">As we can see, the stock clusters look like the new stock we are working on. The clustering model will tell us which other stocks in the same cluster this new stock is associated with.</p>
<p style="font-weight: 400">There is a shortcut we can use when building the model on stocks, which is also a practical consideration. For stocks in an industry that has too few stocks (less than 100, for example), there is no need to build a clustering model to help us find the subgroups within the industry. Instead, we should go and check every single stock if there aren't many of them.</p>
<p style="font-weight: 400">Given the complete member list of the stock clusters, we can go to the existing stockholders of these stocks to find out the current owners (investor list A). If we still need more names to approach, then we can run another investor-level clustering model to find out who else (investor list B) might be interested in this stock that shares similar traits as investor list A.</p>
<p>Follow these steps to perform clustering:</p>
<ol style="font-weight: 400">
<li>Find the stocks that have similar financials to the one we are looking to list/syndicate and which share the same industry.</li>
<li>Based on the stocks we found, we find out who the existing holders of the stocks are.</li>
<li>We find the list of investors who hold the stocks we checked; that is, the selected investors.</li>
<li>We find the clustering IDs of all the investors.</li>
<li>Given the selected investors, find out clusters and the other investors that share the same cluster ID. Those are the target investors we will sell the new issue to.</li>
</ol>
<p>The following is the pseudocode we can use to perform clustering:</p>
<pre>#Step 2 and 3. Perform clustering to find out the similar investors whose sharing the similar stocks<br/><br/><br/>'''*****************************<br/>Step 3: Run the similarity models to find out holders of the similar stocks<br/>'''<br/>#check if we need any model - if industry has too few stocks, no model needed to find out the similar stocks<br/>...<br/><br/>#retrieve the list of tickers that are similar<br/>...<br/><br/>#find list of investors looking at the similar size and more<br/>#check which investors have it...<br/>...<br/><br/>#loop through investors holding name by name to find out investor that is holding the similar stocks<br/>for filename in investorNameList:<br/>    ...<br/><br/>#Load the investor clustering model<br/>...<br/>#extract the investors' cluster id<br/>...<br/><br/>#find out who else share the same cluster id<br/>...<br/><br/>#print out the investor list<br/>...</pre>
<p>The preceding code shows how to list the clustered investors with similar portfolio stocks. Here, we have built a clustered model for investors and used it. In the next section, we will build an understanding of acquirers and targets.</p>
<h1 id="uuid-05a1d075-8faa-4469-bf6f-d43f386d3821">Identifying acquirers and targets</h1>
<p style="font-weight: 400">There has been a long history of corporate finance research in the field of acquirers and targets, and our challenge is to apply this rich body of research to the real world. Hedge funds have been applying these research findings as merger arbitrage, and M&amp;A bankers have always had their eyes on scoring and assessing the market on a regular basis (for example, reading the morning news).</p>
<p style="font-weight: 400">In this chapter, we will assume that you are an M&amp;A banker looking for organization opportunities. To optimize our time allocation, we can allocate our time better by focusing on clients that can close the deal. Therefore, we will use a model to predict the probability of us being the acquirers or targets in M&amp;A.</p>
<p style="font-weight: 400">The current new generation of investment bankers should use automated financial modeling tools. Over time, data can be captured, and then prediction capability can be added to assist bankers in financial modeling. The current world, which uses Excel, definitely needs to do more NLP research into how to train a machine to parse/understand an Excel-based financial model, which is understood by humans but barely understood by the machine at all!</p>
<p style="font-weight: 400">Secondly, an M&amp;A prediction model should be part of the investment committee/mandate acceptance committee, where the likelihood of announcing the deal shall be presented <span>– </span>just like how credit ratings are presented in credit committees today.</p>
<p style="font-weight: 400">So, let's see how we can apply a similar approach to credit rating in M&amp;A prediction to spot a deal.</p>
<p>Follow these steps to solve this problem. We will start by loading the necessary Python libraries:</p>
<ol>
<li>Import all the required libraries and define the key variables:</li>
</ol>
<pre style="padding-left: 60px">'''*************************************<br/>#1. Import libraries and define key variables<br/>'''<br/>import pandas as pd<br/>import numpy as np<br/>import quandl<br/>import matplotlib.pyplot as plt <br/>from sklearn.metrics import classification_report,roc_curve, auc,confusion_matrix,f1_score<br/>from sklearn.model_selection import train_test_split<br/>from sklearn import tree<br/>from sklearn.neural_network import MLPClassifier<br/>from sklearn.preprocessing import StandardScaler<br/>import pickle<br/>import graphviz<br/><br/>#KPI keys<br/>quandl.ApiConfig.api_key = '[API Key for Quandl]'</pre>
<ol start="2">
<li>Download the financials of a given ticker (leverage them from the previous example) and define the function you will use to train the tree and the neural network, including grid search (all of these can be leveraged from <a href="61949743-f7c3-4295-aaee-dab1d169d25c.xhtml">Chapter 3</a>, <em>Using Features and Reinforcement Learning to Automate Bank Financing</em>):</li>
</ol>
<pre style="padding-left: 60px">'''*************************************<br/>#2. Definition of functions<br/>'''<br/>#2a.Download tickers<br/>def download_tkr(tkr):<br/>...<br/>#2b.Train tree<br/>def train_tree(X,Y,ind):<br/>...<br/>##2C Neural Network<br/>#2Ci. Grid search that simulate the performance of different neural network design<br/>def grid_search(X_train,X_test, Y_train,Y_test,num_training_sample):<br/>...<br/>#2Cii. Train Neural Network<br/>def train_NN(X,Y,ind):<br/>...</pre>
<ol start="3">
<li>Filter the industries that have a sizable number of tickers and run through the industry and its respective tickers to build the decision tree and the neural network:</li>
</ol>
<pre style="padding-left: 60px">def filterIndustriesByTickets(ind):</pre>
<ol start="4">
<li>Output the results by the ROC curve per industry:</li>
</ol>
<pre style="padding-left: 60px">def displayCurveChart(type, ind):</pre>
<ol start="5">
<li>Load the list of companies from the file alongside their sectors, just like we did auto syndication. Select the sectors that have at least 30 companies to ensure size. Load the tickers of the same sector into one entry on a dictionary, taking the sector as the key and tickers as values:</li>
</ol>
<pre style="padding-left: 60px">'''*************************************<br/>3. Execute the program<br/>#3a. filter the industry in scope<br/>'''<br/>groupby_fld = 'sicsector'<br/>min_size = 30<br/>df_tkr = pd.read_csv('industry_tickers_list.csv')<br/>...<br/>#collect ticker in each industry<br/>for index, row in df_tkr.iterrows():<br/>    ind = row[groupby_fld]<br/>    tkr = row['ticker']<br/>    if ind in list_scope:<br/>        if ind in dict_ind_tkr:<br/>            dict_ind_tkr[ind].append(tkr)<br/>        else:<br/>            dict_ind_tkr[ind] = [tkr</pre>
<ol start="6">
<li>Loop through the selected sectors one by one and load the companies' historical financials. For each company, we will load 10 year's worth of annual financial records:</li>
</ol>
<pre style="padding-left: 60px">#loop through the dictionary - one industry at a time<br/>for ind, list_tkr in dict_ind_tkr.items():<br/>    df_X = pd.DataFrame({})<br/>    df_Y = pd.DataFrame({})<br/>    print(ind)<br/>    #Go through the ticker list to Download data from source<br/>    #loop through tickers from that industry<br/>    for tkr in list_tkr:<br/>        print(tkr)<br/>        try:<br/>            df_tmp,X_tmp,Y_tmp = download_tkr(tkr)<br/>        ...</pre>
<p style="padding-left: 60px">Here, we loaded the events of the company. After loading the events, we filtered only those related to M&amp;A and made them a binary column to denote whether the company has completed any M&amp;A within 1 calendar year, where <kbd>1</kbd> equals <kbd>yes</kbd>. Then, we j<span>oined both company financials and events together—we joined both <em>t-1</em> years financials with the binary event indicator at year <em>t</em>. We converted the null event into <em>0</em>. </span><span>Most of this logic is implemented to prepare the financials and events, which is done via <kbd>download_tkr(tkr)</kbd>.</span></p>
<ol start="7">
<li>Split the data from the industry in order to train the models:</li>
</ol>
<pre style="padding-left: 60px">    #neural network<br/>    nn_clf,f1_score_temp = train_NN(df_X,df_Y,ind)<br/>    f1_list.append(f1_score_temp)<br/>    nn_clf.get_params()<br/>   <br/>    #decision tree<br/>    try:<br/>        tree_clf,f1_score_temp = train_tree(df_X,df_Y,ind)<br/>    except Exception:<br/>        continue<br/>    <br/>    f1_list.append(f1_score_temp)<br/>    tree_clf.get_params()</pre>
<p><span>Here, we leveraged what we built in <a href="9ee6480e-c259-4e5d-bc11-31057de1a173.xhtml">Chapter 2</a>, <em>Time Series Analysis</em>. However, for the sake of illustration, we only used a decision tree and neural network code.</span></p>
<p>This brings us to the end of this chapter.</p>
<h1 id="uuid-1473c4a6-5972-4ad2-93d3-b9e3648b2527">Summary</h1>
<p>In this chapter, you understood the basics of investment banking. Now, you should be able to understand the concepts of IPO and M&amp;A. Based on the data technologies you learned about in this chapter, you should be able to model the domain requirements. With the use of the clustering model technique, you can now create high-performance artificial intelligence systems.</p>
<p>After this, we completed an exercise where we solved the problem of auto syndication for new issues. We also looked at an example regarding how to identify acquirers and targets.</p>
<p>In the next chapter, we will focus on portfolio management, asset management, and a few artificial techniques that are suitable in the domain of portfolio management.</p>


            </article>

            
        </section>
    </body></html>