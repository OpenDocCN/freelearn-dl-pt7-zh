<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer261">
			<h1 id="_idParaDest-147"><em class="italic"><a id="_idTextAnchor151"/>Chapter 13</em>: Improving the Accuracy of Document Processing Workflows</h1>
			<p>In the last chapter, we covered how AWS AI services such as <strong class="bold">Amazon</strong> <strong class="bold">Textract</strong> and <strong class="bold">Amazon</strong> <strong class="bold">Comprehend Medical</strong> can help automate healthcare workflows quickly. In this chapter, we will talk about why we need humans in the loop in document processing workflows, and how setting up <strong class="bold">human-in-the-loop</strong> (<strong class="bold">HITL</strong>) processes with <strong class="bold">Amazon</strong> <strong class="bold">Augmented AI</strong> (<strong class="bold">Amazon A2I</strong>) can help improve accuracy in your existing document processing workflows with <strong class="bold">Amazon</strong> <strong class="bold">Textract</strong>.</p>
			<p>Amazon A2I is a managed service that makes it easy to build the workflows required for the human review of <strong class="bold">machine learning</strong> (<strong class="bold">ML</strong>) predictions. In this chapter, we will cover the following topics:</p>
			<ul>
				<li>The need for setting up HITL processes with document processing</li>
				<li>Seeing the benefits of using Amazon A2I for HITL workflows</li>
				<li>Adding human reviews to your document processing pipelines</li>
			</ul>
			<h1 id="_idParaDest-148"><a id="_idTextAnchor152"/>Technical requirements</h1>
			<p>For this chapter, you will need access to an <strong class="bold">AWS</strong> <strong class="bold">Account</strong>. Please make sure to follow the instructions specified in the <em class="italic">Technical requirements</em> section in <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a><em class="italic">, Introducing Amazon Textract,</em> to create your AWS Account, and log in to the <strong class="bold">AWS Management Console</strong> before trying the steps in <em class="italic">Improving the accuracy of document processing workflows</em>.</p>
			<p>The <strong class="bold">Python</strong> code and sample datasets for our solution can be found at the following link: <a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/tree/main/Chapter%2013">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/tree/main/Chapter%2013</a> .</p>
			<p>Check out the following video to see the Code in Action at <a href="https://bit.ly/3jBxBQq">https://bit.ly/3jBxBQq</a>.</p>
			<p>Please use the instructions in the following sections along with the code in the repository to build the solution.</p>
			<h1 id="_idParaDest-149"><a id="_idTextAnchor153"/>The need for setting up HITL processes with document processing</h1>
			<p>In <a id="_idIndexMarker750"/>the previous chapters, we<a id="_idIndexMarker751"/> have discussed how you can use Amazon Textract and Amazon Comprehend to automate your existing document processing workflows with AWS AI services. We covered some of the key use cases such as using Comprehend to analyze SEC filing reports and using Textract to extract text from any document or quickly digitize any document. We also spoke about how these AI services provide a confidence score with each predicted text, word, line, or entity. Now, the questions that customers often ask are about how to improve these predictions and to make sure they are highly accurate. In most AI systems, it's either AI doing the automation process or it's only humans or manual processes.</p>
			<p>The ideal scenario would be both humans and AI working together so that the results predicted by these AI systems can be reviewed by humans to make sure they are highly accurate. This applies to scenarios where we are processing highly critical information in our document processing workflows, for example, processing loan applications, invoice processing, mortgage processing, or legal documents reviews, and so on. In all of these scenarios, you would want a human to validate or review whether the loan amount or invoice amount predicted by the ML or AI systems was accurate because if it was not, one zero could change your life! It could lead to millions in losses for the organization. Also, in the case of low-confidence predictions, you would also want to have the AI-predicted information checked over by a human reviewer. For example, in the case of claims processing, if your ML system has predicted a low confidence score for a claim, you would want to reject or approve the claim based on a human review. This working of humans and AI/ML together builds trust with the process and it also reduces the time to market for the overall document processing solution.</p>
			<p>In this section, we covered why you would need to set up a human review loop with your existing document processing workflows – that is, it helps to improve accuracy and build trust with AI systems. In the next section, we will talk about some of the key benefits of using Amazon A2I when setting up HITL workflows.</p>
			<h1 id="_idParaDest-150"><a id="_idTextAnchor154"/>Seeing the benefits of using Amazon A2I for HITL workflows</h1>
			<p>Amazon A2I<a id="_idIndexMarker752"/> is a managed service that makes it easy to build and manage human reviews with any ML application. It integrates directly with Amazon Textract and <strong class="bold">Amazon</strong> <strong class="bold">Rekognition</strong> to set<a id="_idIndexMarker753"/> up human workflows for use cases such as content moderation or document processing. You can also create custom workflows with any Sagemaker model. Some of the benefits of using Amazon A2I are as follows:</p>
			<ul>
				<li>It comes with 70+ UI templates to get started quickly with setting up UIs for human reviews. Check them out here: <a href="https://github.com/aws-samples/amazon-a2i-sample-task-uis">https://github.com/aws-samples/amazon-a2i-sample-task-uis</a>.</li>
				<li>It reduces the time to<a id="_idIndexMarker754"/> market for your AI systems, as you know that there is a human backstop to catch low confidence scores.</li>
				<li>It provides you with options to choose a workforce. By <em class="italic">workforce</em>, we mean who is going to review the human loop tasks created. There are three choices with A2I – a private workforce, <strong class="bold">Amazon</strong> <strong class="bold">Mechanical Turk</strong>, and third-party vendors. Amazon Mechanical Turk is<a id="_idIndexMarker755"/> a globally districted workforce option available for you to use. In case you have sensitive data, you can onboard your own employees and use the private workforce option. In this chapter, we will show you how you can create a private workforce and use it in Amazon A2I.</li>
			</ul>
			<p>We have discussed some of the benefits, now, let's deep dive into how Amazon A2I works with any AWS AI <a id="_idIndexMarker756"/>service, your custom model, or Sagemaker-deployed models through the following architecture:</p>
			<div>
				<div id="_idContainer248" class="IMG---Figure">
					<img src="Images/B17528_13_01.jpg" alt="Figure 13.1 – Amazon A2I architecture&#13;&#10;" width="1186" height="573"/>
				</div>
			</div>
			<p class="figure-caption">Figure 13.1 – Amazon A2I architecture</p>
			<p>Let's understand the diagram by going through each step:</p>
			<ol>
				<li>Your client application sends the data or documents to your AWS AI service or any custom model.</li>
				<li>The AWS AI service, such <a id="_idIndexMarker757"/>as Amazon Textract, or any custom ML model, makes a prediction.</li>
				<li>You create criteria or threshold conditions with your ML models to trigger an Amazon A2I human loop. In the previous architecture, the threshold is a high-confidence prediction, which is returned immediately to a client application. This threshold can be set by your business needs and use case, for example, invoices amount detected at 99% and above can be considered high confidence since it's highly critical and needs to be highly accurate. In cases where you are extracting some entity such as the location you may consider 90% as the high confidence level, below which to trigger a human review loop.</li>
				<li>Low confidence predictions, which are anything below your defined threshold limit, can be sent for human review, where a human or your workforce will be presented with a UI managed by Amazon A2I. The low confidence data will be presented in that UI to the human reviewers where they review the low confidence prediction and augment, correct, or validate it.</li>
				<li>The human-reviewed results are saved in Amazon S3, consisting of both what the AI predicted and what the humans augmented or modified. This data can be considered the <em class="italic">ground truth</em> and can be used to retrain the model if you are using a custom model. You can<a id="_idIndexMarker758"/> improve the accuracy of your custom models by retraining them from an augmented dataset. See the <em class="italic">Further reading</em> section for a blog reference on how you can achieve this.</li>
			</ol>
			<p>From Amazon S3, your corrected or human augmented/validated AI/ML predictions can be sent to client applications.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">With Amazon Textract, you can only augment or validate your predictions. The model retraining feature is not supported yet, as Amazon Textract does not support custom models. However, with Amazon Comprehend's custom classification and the custom entity you can use Amazon A2I to retrain your custom models and improve accuracy.</p>
			<p>In this section, we covered the benefits of using Amazon A2I and saw how it works to improve the accuracy of your AI/ML system. In the next section, we will walk you through how you can set up HITL workflows with document processing workflows using Amazon Textract and Amazon A2I.</p>
			<h1 id="_idParaDest-151"><a id="_idTextAnchor155"/>Adding human reviews to your document processing pipelines</h1>
			<p>We covered <a id="_idIndexMarker759"/>how A2I works in general <a id="_idIndexMarker760"/>with any AWS AI service using an architecture. In this section, we will talk specifically about how Amazon A2I integrates with Amazon Textract so that you can automate your existing document workflows with a HITL. We will also show you a walkthrough on how to set up a human review workflow using the AWS Console.</p>
			<p>Let's start by walking through how Amazon A2I works with Amazon Textract:</p>
			<div>
				<div id="_idContainer249" class="IMG---Figure">
					<img src="Images/B17528_13_02.jpg" alt="Figure 13.2 – Amazon A2I with Amazon Textract&#13;&#10;" width="1541" height="566"/>
				</div>
			</div>
			<p class="figure-caption">Figure 13.2 – Amazon A2I with Amazon Textract</p>
			<p>Your scanned documents are sent to Amazon Textract. Amazon Textract extracts text, key-value pairs, and tables from the document. Now for this extracted text, key-value pairs, and tables, you also get confidence scores. You can set up a threshold that Amazon A2I triggers to <a id="_idIndexMarker761"/>create human review loops. You<a id="_idIndexMarker762"/> can set up a threshold with Amazon Textract for three things:</p>
			<ul>
				<li>For any missing keys in case of <em class="italic">key-value pair detection</em>, for example, the mailing address is an important key in a form you are reviewing and it's missing in what the AI predicted.</li>
				<li>You can define a threshold for predictions that can be considered high-confidence.</li>
				<li>You can send predictions for <strong class="bold">Quality Assurance</strong> (<strong class="bold">QA</strong>) auditing.<p class="callout-heading">Note</p><p class="callout">Amazon Textract and Amazon A2I have a native integration in the API only for the key-value or form data extraction should you want to set up human reviews for text or tabular data detected by Amazon Textract.</p></li>
			</ul>
			<p>You can use a custom A2I UI template and set up a loop using the <strong class="source-inline">starthumanloop</strong> A2I API rather than the Textract API. We will add examples on how you can set up a custom loop (in the <em class="italic">Further reading</em> section<a id="_idIndexMarker763"/>) when Amazon A2I starts a human loop API: <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/a2i-start-human-loop.html#a2i-instructions-starthumanloop">https://docs.aws.amazon.com/sagemaker/latest/dg/a2i-start-human-loop.html#a2i-instructions-starthumanloop</a>.</p>
			<p>Let's go back to our <a id="_idIndexMarker764"/>fictitious company use<a id="_idIndexMarker765"/> case. This bank, LiveRight, wants to digitize its check processing system. The current system is a manual review of the check amount and date, which is time-consuming and error-prone. We will show you how LiveRight can use Amazon Textract and Amazon A2I to automate their current check processing system. We will use this sample check document:</p>
			<div>
				<div id="_idContainer250" class="IMG---Figure">
					<img src="Images/B17528_13_03.jpg" alt="Figure 13.3 – Sample check&#13;&#10;" width="1428" height="626"/>
				</div>
			</div>
			<p class="figure-caption">Figure 13.3 – Sample check</p>
			<p>We will use the check to validate the dollar value and date to make sure it's accurate before we issue it to the payee. To do this, we will walk through the following steps:</p>
			<ul>
				<li>Creating an Amazon S3 bucket</li>
				<li>Creating a private work team in the AWS Console</li>
				<li>Creating a human review workflow in the AWS Console</li>
				<li>Sending the document to Amazon Textract and Amazon A2I by calling the Amazon Textract API</li>
				<li>Completing a human review of your document in the A2I Console</li>
				<li>Seeing the results in your S3 bucket</li>
			</ul>
			<p>So, let's get started!</p>
			<h2 id="_idParaDest-152"><a id="_idTextAnchor156"/>Creating an Amazon S3 bucket</h2>
			<p>First, we will talk<a id="_idIndexMarker766"/> about how you can create an Amazon S3 bucket and upload the sample document for Textract A2I processing. Amazon A2I needs an Amazon S3 bucket to store the human-annotated results, as we covered in the architecture in <em class="italic">Figure 13.1</em>. We will also enable the <strong class="bold">Cross-Origin Resource Sharing</strong> (<strong class="bold">CORS</strong>) configuration needed to set up the A2I loop in this S3 bucket. </p>
			<p>This configuration allows the A2I browser permission to download resources from this S3 bucket. To do this, follow the next steps:</p>
			<ol>
				<li value="1">Go to the Amazon S3 link: <a href="https://s3.console.aws.amazon.com/s3/bucket/create?region=us-east-1">https://s3.console.aws.amazon.com/s3/bucket/create?region=us-east-1</a>.<p>Then, create a bucket with <strong class="source-inline">a2i-demos</strong> as the bucket name, using the instructions in <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a>,<em class="italic"> Introducing Amazon Textract</em>.</p></li>
				<li>After creating the bucket, upload the sample check from the following link to the bucket: <a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2013/samplecheck.PNG">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2013/samplecheck.PNG</a>. </li>
				<li>After uploading the sample check, go to <strong class="bold">Amazon S3 bucket</strong> | <strong class="bold">Permissions</strong> and scroll down to <strong class="bold">CORS</strong>, then copy and paste the following CORS configuration:<p class="source-code">[</p><p class="source-code">    {</p><p class="source-code">        "AllowedHeaders": [],</p><p class="source-code">        "AllowedMethods": [</p><p class="source-code">            "GET"</p><p class="source-code">        ],</p><p class="source-code">        "AllowedOrigins": [</p><p class="source-code">            "*"</p><p class="source-code">        ],</p><p class="source-code">        "ExposeHeaders": []</p><p class="source-code">    }</p><p class="source-code">]</p><p>Your CORS configuration<a id="_idIndexMarker767"/> should look like this:</p></li>
			</ol>
			<div>
				<div id="_idContainer251" class="IMG---Figure">
					<img src="Images/B17528_13_04.jpg" alt="Figure 13.4 – CORS configuration for our S3 A2I output bucket&#13;&#10;" width="1194" height="521"/>
				</div>
			</div>
			<p class="figure-caption">Figure 13.4 – CORS configuration for our S3 A2I output bucket</p>
			<p>In this section, we covered creating an S3 bucket, uploading the sample check, and setting up the CORS configuration. Now, we will set up a private work team.</p>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor157"/>Creating a private work team in the AWS Console</h2>
			<p>In this section, we will walk you<a id="_idIndexMarker768"/> through how to create a private <a id="_idIndexMarker769"/>work team and add yourself as a worker using your email:</p>
			<ol>
				<li value="1">Go to the following link and choose <strong class="bold">private</strong>: <a href="https://console.aws.amazon.com/sagemaker/groundtruth?region=us-east-1#/labeling-workforces">https://console.aws.amazon.com/sagemaker/groundtruth?region=us-east-1#/labeling-workforces</a>. </li>
				<li>Click on <strong class="bold">Create private team</strong>, enter <strong class="source-inline">demo-team</strong> as team name, scroll down to <strong class="bold">Add workers</strong>, enter your own valid email address as the email address and your own organization in the <strong class="bold">Organization name field</strong>:<div id="_idContainer252" class="IMG---Figure"><img src="Images/B17528_13_05.jpg" alt="Figure 13.5 – Creating private team and adding workers " width="926" height="471"/></div><p class="figure-caption">Figure 13.5 – Creating private team and adding workers </p></li>
				<li> Scroll down and click <strong class="bold">Create private team</strong>.</li>
			</ol>
			<p>You will <a id="_idIndexMarker770"/>receive an email after adding a worker to<a id="_idIndexMarker771"/> the private team you created. This email will have a link to sign in to your A2I task UI portal, along with your username and password.</p>
			<p>In this section, we covered how you can create a private workforce. Now, let's move on to the next section to set up a human review workflow.</p>
			<h2 id="_idParaDest-154">Creating a human review workflow in<a id="_idTextAnchor158"/> the AWS Console</h2>
			<p>In <a id="_idIndexMarker772"/>this section, we will show you how you can <a id="_idIndexMarker773"/>create a human review workflow with Amazon Textract. You need the Amazon S3 bucket and private workforce created in previous sections, and a UI where the reviews and options ot set the threshold conditions for triggering the human review loop will appear:</p>
			<ol>
				<li value="1">Go to this link to create a human review workflow: <a href="https://console.aws.amazon.com/a2i/home?region=us-east-1#/create-human-review-workflows">https://console.aws.amazon.com/a2i/home?region=us-east-1#/create-human-review-workflows</a>.<p>In the <strong class="bold">Workflow setting</strong>s screen, enter <strong class="source-inline">Textract-check </strong>in the <strong class="bold">Name</strong> field. In <strong class="bold">S3 bucket</strong> enter the name of the bucket you created: &lt;<strong class="source-inline">s3://a2i-demos/</strong>&gt; . For <strong class="bold">IAM role</strong>, click <strong class="bold">Create new role</strong> and choose any S3 bucket. Your settings should look like following:</p><div id="_idContainer253" class="IMG---Figure"><img src="Images/B17528_13_06.jpg" alt="Figure 13.6 – Creating flow definition with A2I&#13;&#10;" width="1434" height="602"/></div><p class="figure-caption">Figure 13.6 – Creating flow definition with A2I</p></li>
				<li>Scroll down<a id="_idIndexMarker774"/> and choose <strong class="bold">Textract-key-value pair extraction</strong> in <strong class="bold">Task type</strong>. </li>
				<li>For triggers to <a id="_idIndexMarker775"/>invoke the human review, you can choose at least one condition or all three. In missing <strong class="bold">form key</strong>, enter <strong class="source-inline">$</strong> and <strong class="bold">add key</strong> and enter <strong class="bold">Date</strong>. Enter the range <strong class="source-inline">0</strong> to <strong class="source-inline">90</strong> for the confidence threshold, as shown in the following screenshot:<div id="_idContainer254" class="IMG---Figure"><img src="Images/B17528_13_07.jpg" alt="Figure 13.7 – Setting the threshold to trigger the A2I loop with Textract&#13;&#10;" width="1126" height="618"/></div><p class="figure-caption">Figure 13.7 – Setting the threshold to trigger the A2I loop with Textract</p></li>
				<li>Now, click the checkmark <a id="_idIndexMarker776"/>the second condition to<a id="_idIndexMarker777"/> review all form keys with confidence scores in a specified range and enter <strong class="source-inline">0</strong> to <strong class="source-inline">90</strong>.<p>We set up two out of three trigger conditions for Textract A2I to trigger a review. The human loops will only be created when the preceding conditions are met – that is, if any key is missing, such as dollar amount and date, or any form key has a confidence score less than 90%.</p></li>
				<li>In <strong class="bold">Worker task template creation</strong>, enter <strong class="source-inline">textract-check-ui</strong>. This is the default UI for Textract forms with A2I integration. You can bring your own custom UI and add it with APIs, which we will cover in the next chapter.</li>
				<li>In <strong class="bold">Worker task template design</strong>, enter <strong class="source-inline">label the data</strong>.</li>
				<li>Scroll down to <strong class="bold">Workers</strong> and choose <strong class="bold">Private</strong>, then click on the <strong class="bold">Private</strong> team you just created:<div id="_idContainer255" class="IMG---Figure"><img src="Images/B17528_13_08.jpg" alt="Figure 13.8 – Choosing your private team in the human review workflow setup&#13;&#10;" width="994" height="495"/></div><p class="figure-caption">Figure 13.8 – Choosing your private team in the human review workflow setup</p></li>
				<li>Click <strong class="bold">Create</strong>. This <a id="_idIndexMarker778"/>will create a human flow <a id="_idIndexMarker779"/>definition. Copy the ARN of this flow definition, which we will use to invoke the human loop in the Textract API when the conditions defined in this flow definition are met.</li>
			</ol>
			<p>In this section, we showed how you can create a flow definition for the human review loop. In the next section, we will show you how you can trigger this flow definition in the Textract Analyze document API while passing documents.</p>
			<h2 id="_idParaDest-155"><a id="_idTextAnchor159"/>Sending the document to Amazon Textract and Amazon A2I by calling the Amazon Textract API</h2>
			<p>In<a id="_idIndexMarker780"/> this section, we will show <a id="_idIndexMarker781"/>you how<a id="_idIndexMarker782"/> you can trigger the A2I flow definition <a id="_idIndexMarker783"/>you just created in the Textract Analyze document API with forms.</p>
			<p>If you have not done so in the previous chapters, you will first have to create an <strong class="bold">Amazon</strong> <strong class="bold">SageMaker</strong> <strong class="bold">Jupyter Notebook</strong> and <a id="_idIndexMarker784"/>set up <strong class="bold">Identity and Access Management</strong> (<strong class="bold">IAM</strong>) permissions for that notebook role to access the AWS services <a id="_idIndexMarker785"/>we will use in this notebook. After that, you will need to clone the GitHub repository (<a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services</a>), go to the <strong class="source-inline">Chapter 13</strong> folder, and open the <strong class="source-inline">chapter13</strong> <strong class="source-inline">Improving</strong> <strong class="source-inline">accuracy</strong> <strong class="source-inline">of document processing</strong> <strong class="source-inline">.ipynb</strong> notebook:</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Make sure the<a id="_idIndexMarker786"/> IAM role in the<a id="_idIndexMarker787"/> notebook has permissions for <strong class="bold">AmazonTextractFullAccess</strong>  (<a href="https://console.aws.amazon.com/iam/home?#/policies/arn:aws:iam::aws:policy/AmazonTextractFullAccess%24jsonEditor">https://console.aws.amazon.com/iam/home?#/policies/arn:aws:iam::aws:policy/AmazonTextractFullAccess$jsonEditor</a>) and <strong class="bold">AmazonAugmentedAIFullAccess</strong> (<a href="https://console.aws.amazon.com/iam/home?#/policies/arn%3Aaws%3Aiam%3A%3Aaws%3Apolicy%2FAmazonAugmentedAIFullAccess">https://console.aws.amazon.com/iam/home?#/policies/arn%3Aaws%3Aiam%3A%3Aaws%3Apolicy%2FAmazonAugmentedAIFullAccess</a>).</p>
			<ol>
				<li value="1">To get started, go to this notebook and enter the S3 bucket name you created in the following notebook cell:<p class="source-code">bucket="&lt;your s3 bucket name&gt;"</p></li>
				<li>In <strong class="source-inline">humanLoopConfig</strong>, paste the flow definition ARN copied from the previous setup:<p class="source-code">humanLoopConfig = {</p><p class="source-code">    'FlowDefinitionArn':"&lt;enter flow definition arn created&gt; ",</p><p class="source-code">    'HumanLoopName':"textract-10", </p><p class="source-code">    'DataAttributes': { 'ContentClassifiers': [ 'FreeOfPersonallyIdentifiableInformation' ]}</p><p class="source-code">}</p></li>
				<li>Run the <a id="_idIndexMarker788"/>following<a id="_idIndexMarker789"/> notebook cell to start the HITL configuration with the A2I Analyze <a id="_idIndexMarker790"/>document API by passing the <strong class="source-inline">humanloopconfig json</strong>, which has the flow definition we created in the <a id="_idIndexMarker791"/>console:<p class="source-code">response = textract.analyze_document(</p><p class="source-code">        Document={'S3Object': {'Bucket': bucket,'Name':  "samplecheck.PNG"}},</p><p class="source-code">        FeatureTypes=["FORMS"], </p><p class="source-code">        HumanLoopConfig=humanLoopConfig</p><p class="source-code">    )</p></li>
				<li>After running this command, you will get a response that has <strong class="bold">HumanLoopActivationConditionsEvaluationResults</strong> in the Textract response, as shown in the following screenshot:<div id="_idContainer256" class="IMG---Figure"><img src="Images/B17528_13_09.jpg" alt="Figure 13.9 – Output of the JSON response of Textract Analyze document API with A2I settings&#13;&#10;" width="1468" height="538"/></div><p class="figure-caption">Figure 13.9 – Output of the JSON response of Textract Analyze document API with A2I settings</p></li>
				<li>Go to the private workteam you created: <a href="https://console.aws.amazon.com/sagemaker/groundtruth?region=us-east-1#/labeling-workforces">https://console.aws.amazon.com/sagemaker/groundtruth?region=us-east-1#/labeling-workforces</a><p>Copy the workteam ARN and paste it in the notebook cell as follows:</p><p class="source-code">WORKTEAM_ARN= "enter your private workteam arn"</p></li>
				<li>Run the following <a id="_idIndexMarker792"/>code block to<a id="_idIndexMarker793"/> navigate to your workteam or A2I Console:<p class="source-code">workteamName = WORKTEAM_ARN[WORKTEAM_ARN.rfind('/') + 1:]</p></li>
				<li>You will <a id="_idIndexMarker794"/>get a link. Click <a id="_idIndexMarker795"/>on the link and sign in with the username and password you received when creating a worker team with your email ID. You will see your A2I tasks, as shown in the following screenshot. Click on <strong class="bold">Start working</strong>:<div id="_idContainer257" class="IMG---Figure"><img src="Images/B17528_13_10.jpg" alt="Figure 13.10 – Amazon A2I Console screen with worker tasks&#13;&#10;" width="1240" height="349"/></div><p class="figure-caption">Figure 13.10 – Amazon A2I Console screen with worker tasks</p></li>
				<li>You will be redirected to the task created when the Textract A2I loop was invoked:<div id="_idContainer258" class="IMG---Figure"><img src="Images/B17528_13_11.jpg" alt="Figure 13.11 – A2I Console with Textract-detected key-values from sample check &#13;&#10;" width="1650" height="696"/></div><p class="figure-caption">Figure 13.11 – A2I Console with Textract-detected key-values from sample check </p></li>
				<li>You are <a id="_idIndexMarker796"/>shown the <a id="_idIndexMarker797"/>original sample check on the left side of this UI portal and the extracted<a id="_idIndexMarker798"/> key-value pair on the<a id="_idIndexMarker799"/> right. Feel free to validate the data and enter the changes if needed. Make sure the <strong class="bold">$</strong> amount and date are correct and click <strong class="bold">Submit</strong>. You can see that the Textract-detected output is mapped to the original document (bounding box mapping) when you click on a specific key-value:<div id="_idContainer259" class="IMG---Figure"><img src="Images/B17528_13_12.jpg" alt="Figure 13.12 – Reviewing and correcting the Textract response in the A2I Console&#13;&#10;" width="1650" height="687"/></div><p class="figure-caption">Figure 13.12 – Reviewing and correcting the Textract response in the A2I Console</p></li>
				<li>After<a id="_idIndexMarker800"/> augmenting and <a id="_idIndexMarker801"/>validating the values and clicking <strong class="bold">Submit</strong>, your output is saved in the same S3 bucket you<a id="_idIndexMarker802"/> created. Run the following <a id="_idIndexMarker803"/>notebook cell to get the JSON results from S3 and see the annotated results:<p class="source-code">for resp in completed_human_loops:</p><p class="source-code">    splitted_string = re.split('s3://' + bucket  + '/', resp['HumanLoopOutput']['OutputS3Uri'])</p><p class="source-code">    output_bucket_key = splitted_string[1]</p><p class="source-code">    print(output_bucket_key)</p><p class="source-code">    response = s3.get_object(Bucket= bucket, Key=output_bucket_key)</p><p class="source-code">    content = response["Body"].read()</p><p class="source-code">    json_output = json.loads(content)</p><p class="source-code">    pp.pprint(json_output)</p><p class="source-code">    print('\n')</p><p>You will get the output with the human-annotated answers in the following screenshot:</p></li>
			</ol>
			<div>
				<div id="_idContainer260" class="IMG---Figure">
					<img src="Images/B17528_13_13.jpg" alt="Figure 13.13 – Human-corrected A2I JSON output&#13;&#10;" width="1467" height="488"/>
				</div>
			</div>
			<p class="figure-caption">Figure 13.13 – Human-corrected A2I JSON output</p>
			<p>In this section, we gave you a notebook walkthrough of invoking the Textract Analyze document API with a HITL following definition configuration for key-value pair or Forms detection.</p>
			<h1 id="_idParaDest-156"><a id="_idTextAnchor160"/>Summary</h1>
			<p>In this chapter, we covered how you can improve the accuracy of your current document processing workflows when using Amazon Textract for automating these document workflows. We introduced Amazon A2I and how it can help improve the accuracy of your text predictions and can be integrated with Amazon Textract to set up a human review workflow. We also discussed how A2I can be used for model retraining with custom models to improve accuracy, which we will cover in the next chapter.</p>
			<p>To further demonstrate how A2I works in action, we have also provided a 10-minute <strong class="bold">YouTube</strong> video tutorial by one of the authors cited in the <em class="italic">Further reading</em> section.</p>
			<h1 id="_idParaDest-157"><a id="_idTextAnchor161"/>Further reading</h1>
			<ul>
				<li><em class="italic">Using Amazon Textract with Amazon A2I for processing critical documents</em> by Anuj Gupta, Talia Chopra, and Pranav Sachdeva: <a href="https://aws.amazon.com/blogs/machine-learning/using-amazon-textract-with-amazon-augmented-ai-for-processing-critical-documents//">https://aws.amazon.com/blogs/machine-learning/using-amazon-textract-with-amazon-augmented-ai-for-processing-critical-documents//</a></li>
				<li><em class="italic">Learn how to add human reviews to your document processing pipelines </em>by Mona Mona: <a href="https://www.youtube.com/watch?v=U2J_pq17POA">https://www.youtube.com/watch?v=U2J_pq17POA</a></li>
			</ul>
		</div>
	</div></body></html>