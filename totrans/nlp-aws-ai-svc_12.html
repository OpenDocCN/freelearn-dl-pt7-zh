<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer203">
			<h1 id="_idParaDest-121"><em class="italic"><a id="_idTextAnchor125"/>Chapter 10</em>: Reducing Localization Costs with Machine Translation </h1>
			<p>About a decade and a half ago (before the internet was what it is today), one of the authors went on a sightseeing trip to Switzerland. It was an impulsive, last-minute decision and was carried out with not a lot of planning. The travel itself was uneventful, and the author was aware that German is an acceptable language in Switzerland, and so busied himself with the English to German <em class="italic">Rosetta tone</em> during the trip. Based on advice from friends who had been to Switzerland before, a rough itinerary was put together that included visits to Zurich, Interlaken, Bern, and so on. With his very naïve German and, more importantly, due to the excellent English spoken by the Swiss, the author relaxed and even started enjoying his trip – until, of course, he went to Geneva, where everyone spoke only French. His attempt to converse in English was met with indifference, and the only French words the author knew were "oui" (meaning "yes") and "au revoir" (meaning "goodbye")! The author ended up having to use sign language, pointing to menu items in restaurants, asking about places to visit by showing a tourist guidebook, and so on to get through his next few days. If only the author had access to the advanced ML-based translation solutions that are so common today – Geneva would have been a breeze.</p>
			<p>In his book <em class="italic">The World Is Flat</em> published in 2005 (almost the same time this author was on his way to Geneva), <em class="italic">Thomas L. Friedman</em> detailed the implications of globalization in the context of how technological advancements, including personal computers and the internet, have led to collapsing economical distinctions and boundaries, so much so that it has leveled the global arena. When enterprises go global, one of the most common tasks they encounter is the need to translate the language of their websites into the local language of the country or state they choose to operate in. This is called localization. Traditionally, organizations hired a team of translators who painstakingly translated the content of their websites, page by page, taking care to retain the correct context of what was being expressed. This was manually fed into multiple pages to stand up their websites. This was both time-consuming and cost-prohibitive but since it was a necessary task, organizations had no choice. Today, with the advent of ML-based translation capabilities such as Amazon Translate, localization can be performed at a fraction of the cost compared to before. </p>
			<p>In the previous chapter, we saw how to harness the power of NLP with AWS AI services to extract metadata for financial filing reports for <strong class="bold">LiveRight</strong> so that their financial analysts can look into important information and make better decisions with respect to financial events such as mergers, acquisitions, and IPOs. In this chapter, we will see how NLP and AWS AI services help to automate website localization using <strong class="bold">Amazon Translate</strong> (<a href="https://aws.amazon.com/translate/">https://aws.amazon.com/translate/</a>), a ML-based translation service that supports 71 languages. You do not need to perform any ML training to use Amazon Translate as it is pre-trained and supports invocations through a simple API call. For use cases that are unique to your business, you can use advanced features of Amazon Translate such as <strong class="bold">Named Entity Translation Customization</strong> (<a href="https://docs.aws.amazon.com/translate/latest/dg/how-custom-terminology.html">https://docs.aws.amazon.com/translate/latest/dg/how-custom-terminology.html</a>), <strong class="bold">Active Custom Translation</strong> (<a href="https://docs.aws.amazon.com/translate/latest/dg/customizing-translations-parallel-data.html">https://docs.aws.amazon.com/translate/latest/dg/customizing-translations-parallel-data.html</a>), and so on. </p>
			<p>To learn how to build a cost-effective localization solution, we will cover the following topics:</p>
			<ul>
				<li>Introducing the localization use case</li>
				<li>Building a multi-language web page using machine translation</li>
			</ul>
			<h1 id="_idParaDest-122"><a id="_idTextAnchor126"/>Technical requirements</h1>
			<p>For this chapter, you will need access to an AWS account. Please make sure that you follow the instructions specified in the <em class="italic">Technical requirements</em> section of <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing Amazon Textract</em>, to create your AWS account. Make sure that you log into the AWS Management Console before trying the steps in the <em class="italic">Building a multi-language web page using machine translation</em> section.</p>
			<p>The Python code and sample datasets for our solution can be found at the link here: <a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/tree/main/Chapter%2010">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/tree/main/Chapter%2010</a>. Please use the instructions in the following sections along with the code in the repository to build the solution.</p>
			<p>Check out the following video to see the Code in Action at <a href="https://bit.ly/3meYsn0">https://bit.ly/3meYsn0</a>.</p>
			<h1 id="_idParaDest-123"><a id="_idTextAnchor127"/>Introducing the localization use case</h1>
			<p>In the past few chapters, we looked at a variety of ways NLP can help us understand our customers better. We learned how we can build applications to detect sentiments, monetize content, detect <a id="_idIndexMarker605"/>unique entities, and understand context, references, and other analytics processes that help organizations gain important insights about their business. In this chapter, we will learn how to automate the process of translating website content into multiple languages. To illustrate this example, we'll assume that our fictitious banking corporation, <strong class="bold">LiveRight Holdings Private Limited</strong>, has decided to expand internationally to delight potential customers in Germany, Spain, and the cities Mumbai and Chennai in India. The launch date for these four pilot regions is coming up fast; that is, in the next 3 weeks. The expansions operations lead has escalated his concerns to senior management, stating that the IT teams may not be ready with the websites in the corresponding local languages of German, Spanish, Hindi, and Tamil on time for the launch. You get a frantic call from the director of IT, your boss, and she has asked you, the application architect, to design and build the websites within the next 2 weeks so that they can use the last week for acceptance testing.</p>
			<p>You know that a manual approach is out of the question as it's going to be impossible to hire translators, complete the work, and build up the websites within 2 weeks. After some quick research, you decide to use <strong class="bold">Amazon Translate</strong>, an ML-based translation service, to <a id="_idIndexMarker606"/>automate the translation process for the websites. You <a id="_idIndexMarker607"/>check the Amazon Translate pricing page (https://aws.amazon.com/translate/pricing/) and realize that you can translate a million characters <a id="_idIndexMarker608"/>for as low as $15 and that, more importantly, for the first 12 months, you can take advantage of the <strong class="bold">AWS Free Tier</strong> (<a href="https://aws.amazon.com/free/">https://aws.amazon.com/free/</a>), which allows you to translate 2 million characters per month, free of charge. For the pilot sites, you perform a character count and see that it's around 500K characters. In the meantime, your director reaches out to ask you to create a quick demonstratable prototype of the <strong class="bold">About Us</strong> page (<a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/input/aboutLRH.html">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/input/aboutLRH.html</a>) in the four target languages of German, Spanish, Hindi, and Tamil.</p>
			<p>We will be walking through this solution using the AWS Management Console and an Amazon SageMaker Jupyter notebook. Please refer to the <em class="italic">Signing up for an AWS account</em> section of the <em class="italic">Setting up your AWS environment</em> section of <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing Amazon Textract</em>, for detailed instructions on how to sign up for an AWS account <a id="_idIndexMarker609"/>and sign into the <strong class="bold">AWS Management Console</strong>.</p>
			<p>First, we will create an <strong class="bold">Amazon SageMaker</strong> Jupyter notebook instance (if you haven't done so already in the previous chapters), clone the repository into our notebook instance, open the Jupyter notebook for our solution walkthrough (<a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/Reducing-localization-costs-with-machine-translation-github.ipynb">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/Reducing-localization-costs-with-machine-translation-github.ipynb</a>), and execute the steps in the notebook. Detailed instructions will be provided in the <em class="italic">Building a multi-language web page using machine translation</em> section. Let's take a look:</p>
			<ol>
				<li>In the notebook, we will view the English version of the <strong class="bold">About Us</strong> page.</li>
				<li>Then, we will review the HTML code of the <strong class="bold">About Us</strong> page to determine what tag components need translating.</li>
				<li>Next, we will install an HTML parser library for Python (<a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a>) and extract the text content of the tags we are interested in from our HTML page into a list.</li>
				<li>We will use the <strong class="bold">boto3 AWS Python SDK</strong> for <strong class="bold">Amazon Translate</strong> to get a handle on <a id="_idIndexMarker610"/>and invoke the translation function. We will do this in <a id="_idIndexMarker611"/>a loop to get the translated content in German, Spanish, Hindi, and Tamil.</li>
				<li>Then, we will take the original HTML (in English) and update it with content for the corresponding tags for each of the four languages to create four separate HTML pages.</li>
				<li>Finally, we will display the HTML pages to review the translations.</li>
			</ol>
			<p>Once you've done this, you can <a id="_idIndexMarker612"/>upload the HTML to an <strong class="bold">Amazon S3</strong> bucket and set up an <strong class="bold">Amazon CloudFront</strong> distribution to provision your website globally in <a id="_idIndexMarker613"/>minutes. For more details on how to do this, please refer to this link: <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-cloudfront-walkthrough.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-cloudfront-walkthrough.html</a>. In this section, we introduced the localization requirements for <strong class="bold">LiveRight</strong>, the people who are looking to expand internationally, and who need local language-specific web pages for their launch in these markets. In the next section, we will learn how to build the solution.</p>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor128"/>Building a multi-language web page using machine translation</h1>
			<p>In the previous section, we introduced a requirement for web page localization, covered the design aspects <a id="_idIndexMarker614"/>for the solution we will be building, and briefly walked through the solution components <a id="_idIndexMarker615"/>and workflow steps. In this section, we will start executing the tasks to build our solution. But first, there are some prerequisites we will have to take care of.</p>
			<h2 id="_idParaDest-125"><a id="_idTextAnchor129"/>Setting up to solve the use case</h2>
			<p>If you have not done so in the previous chapters, as a prerequisite, you will have to create an Amazon SageMaker Jupyter notebook instance and set up <strong class="bold">Identity and Access Management</strong> (<strong class="bold">IAM</strong>) permissions for that notebook role to access the AWS services we <a id="_idIndexMarker616"/>will use in this notebook. After that, you will need to clone the GitHub repository (https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services) and create an Amazon S3 (<a href="https://aws.amazon.com/s3/">https://aws.amazon.com/s3/</a>) bucket. Finally, you must go to the <strong class="source-inline">Chapter 10</strong> folder and open the <strong class="source-inline">Reducing-localization-costs-with-machine-translation-github.ipynb</strong> notebook to start the execution process.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Please ensure you have completed the tasks mentioned in the <em class="italic">Technical requirements</em> section.</p>
			<p>Follow the instructions documented in the <em class="italic">Creating an Amazon SageMaker Jupyter Notebook instance</em> section of the <em class="italic">Setting up your AWS environment</em> section of <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing Amazon Textract</em>, to create your Jupyter Notebook instance. Let's get started:</p>
			<p class="callout-heading">Important – IAM role permissions while creating Amazon SageMaker Jupyter notebooks</p>
			<p class="callout">Accept the default for the IAM role at notebook creation time to allow access to any S3 bucket.</p>
			<ol>
				<li value="1">Once you've <a id="_idIndexMarker617"/>created the notebook instance and set its status to <strong class="bold">InService</strong>, please attach the <strong class="source-inline">TranslateFullAccess</strong> policy to your Amazon SageMaker notebook IAM role. To execute this step, please refer to the <em class="italic">Changing IAM permissions and trust relationships for the Amazon SageMaker notebook execution role</em> section of the <em class="italic">Setting up your AWS environment</em> section of <a href="B17528_02_Final_SB_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing Amazon Textract</em>.</li>
				<li>Now, go back to your notebook instance and click on <strong class="bold">Open Jupyter</strong> from the <strong class="bold">Actions</strong> menu:<div id="_idContainer195" class="IMG---Figure"><img src="Images/B17528_10_01.jpg" alt="Figure 10.1 – Opening the Jupyter notebook" width="1123" height="362"/></div><p class="figure-caption">Figure 10.1 – Opening the Jupyter notebook</p><p>This will take you to the home folder of your notebook instance.</p></li>
				<li>Click on <strong class="bold">New</strong> and select <strong class="bold">Terminal</strong>, as shown in the following screenshot:<div id="_idContainer196" class="IMG---Figure"><img src="Images/B17528_10_02.jpg" alt="Figure 10.2 – Opening a terminal in Jupyter notebook&#13;&#10;" width="1117" height="535"/></div><p class="figure-caption">Figure 10.2 – Opening a terminal in Jupyter notebook</p></li>
				<li>In the <a id="_idIndexMarker618"/>terminal window, type <strong class="source-inline">cd SageMaker</strong> and then <strong class="source-inline">git clone https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services</strong>, as shown in the following screenshot. If you have already done this in the previous chapters for this notebook instance, you don't have to clone the repository again:<div id="_idContainer197" class="IMG---Figure"><img src="Images/B17528_10_03.jpg" alt="Figure 10.3 – The git clone command&#13;&#10;" width="938" height="148"/></div><p class="figure-caption">Figure 10.3 – The git clone command</p></li>
				<li>Now, exit the terminal window and go back to the home folder – you will see a folder <a id="_idIndexMarker619"/>called <strong class="source-inline">Natural-Language-Processing-with-AWS-AI-Services</strong>. Upon clicking this folder, you will see <strong class="source-inline">chapter-10-localization-with-machine-translation</strong>. Click this folder and then open the <strong class="source-inline">Reducing-localization-costs-with-machine-translation-github.ipynb</strong> notebook.</li>
			</ol>
			<p>Now that we have created our notebook instance and cloned our repository, we can start running our notebook code.</p>
			<h2 id="_idParaDest-126"><a id="_idTextAnchor130"/>Running the notebook</h2>
			<p>Open the notebook you cloned from this book's GitHub repository (<a href="https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/Reducing-localization-costs-with-machine-translation-github.ipynb">https://github.com/PacktPublishing/Natural-Language-Processing-with-AWS-AI-Services/blob/main/Chapter%2010/Reducing-localization-costs-with-machine-translation-github.ipynb</a>), as we discussed in the <em class="italic">Setting up to solve the use case</em> section, and execute the cells step by step, as follows:</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Please ensure you have executed the steps in the <em class="italic">Technical requirements</em> and <em class="italic">Setting up to solve the use case</em> sections before you execute the cells in the notebook.</p>
			<ol>
				<li value="1">Execute the <a id="_idIndexMarker620"/>first cell in the notebook, under the <em class="italic">Input HTML Web Page</em> section, to render the HTML for the English version of our web page:<p class="source-code">from IPython.display import IFrame</p><p class="source-code">IFrame(src='./input/aboutLRH.html', width=800, height=400)</p></li>
				<li>You will see that the page has a few headings and then a paragraph talking about <strong class="bold">Family Bank</strong>, a subsidiary of <strong class="bold">LiveRight Holdings</strong>:<div id="_idContainer198" class="IMG---Figure"><img src="Images/B17528_10_04.jpg" alt="Figure 10.4 – English version of the web page&#13;&#10;" width="1570" height="777"/></div><p class="figure-caption">Figure 10.4 – English version of the web page</p></li>
				<li>Execute the following cell to review the HTML code for our web page:<p class="source-code">!pygmentize './input/aboutLRH.html'</p></li>
				<li>We will see the following output for the web page. The areas highlighted in the following output <a id="_idIndexMarker621"/>are the tags we are interested in translating for our target web pages. In this code block, we can define the title of the web page and some default JavaScript imports:<p class="source-code">&lt;!DOCTYPE html&gt;</p><p class="source-code">&lt;html&gt;</p><p class="source-code">    &lt;head&gt;</p><p class="source-code">        <strong class="bold">&lt;title&gt;Live Well with LiveRight&lt;/title&gt;</strong></p><p class="source-code">        &lt;meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1.0"&gt;</p><p class="source-code">        &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"&gt;&lt;/script&gt;</p><p class="source-code">        &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"&gt;&lt;/script&gt;</p><p class="source-code">        &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"&gt;&lt;/script&gt;</p><p class="source-code">        &lt;script src="https://sdk.amazonaws.com/js/aws-sdk-2.408.0.min.js"&gt;&lt;/script&gt;</p><p class="source-code">        &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"&gt;&lt;/script&gt;</p><p class="source-code">    &lt;/head&gt;</p></li>
				<li>Now, we will <a id="_idIndexMarker622"/>define the body of the page with the h1, h2, and h3 headings, as shown in the following code block:<p class="source-code">    &lt;body&gt;</p><p class="source-code">        <strong class="bold">&lt;h1&gt;Family Bank Holdings&lt;/h1&gt;</strong></p><p class="source-code">        &lt;h3&gt;Date: &lt;span id="date"&gt;&lt;/span&gt;&lt;/h3&gt;</p><p class="source-code">        &lt;div id="home"&gt;</p><p class="source-code">          &lt;div id="hometext"&gt;</p><p class="source-code">        <strong class="bold">&lt;h2&gt;Who we are and what we do&lt;/h2&gt;</strong></p></li>
				<li>Next, we will define the actual body of the text as an h4 heading to highlight it, as shown in the following code block:<p class="source-code">        <strong class="bold">&lt;h4&gt;&lt;p&gt;A wholly owned subsidiary of LiveRight, we are the nation's largest bank for SMB owners and cooperative societies, with more than 4500 branches spread across the nation, servicing more than 5 million customers and continuing to grow.</strong></p><p class="source-code"><strong class="bold">          We offer a number of lending products to our customers including checking and savings accounts, lending, credit cards, deposits, insurance, IRA and more. Started in 1787 as a family owned business providing low interest loans for farmers struggling with poor harvests, LiveRight helped these farmers design long distance water channels from lakes in neighboring districts</strong></p><p class="source-code"><strong class="bold">             to their lands. The initial success helped these farmers invest their wealth in LiveRight and later led to our cooperative range of products that allowed farmers to own a part of LiveRight.</strong></p><p class="source-code"><strong class="bold">             In 1850 we moved our HeadQuarters to New York city to help build the economy of our nation by providing low interest lending products to small to medium business owners looking to start or expand their business.</strong></p><p class="source-code"><strong class="bold">              From 2 branches then to 4500 branches today, the trust of our customers helped us grow to become the nation's largest SMB bank. &lt;/p&gt;</strong></p><p class="source-code"><strong class="bold">        &lt;/h4&gt;</strong></p><p class="source-code">        &lt;/div&gt;</p><p class="source-code">        &lt;/div&gt;</p></li>
				<li>Now, we will <a id="_idIndexMarker623"/>start the JavaScript section in the HTML to get the current date to be displayed, as shown in the following code block:<p class="source-code">        &lt;script&gt;</p><p class="source-code">        // get date</p><p class="source-code">            var today = new Date();</p><p class="source-code">            var dd = String(today.getDate()).padStart(2, '0');</p><p class="source-code">            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!</p><p class="source-code">            var yyyy = today.getFullYear();</p><p class="source-code">            today = mm + '/' + dd + '/' + yyyy;</p><p class="source-code">            document.getElementById('date').innerHTML = today; //update the date</p><p class="source-code">        &lt;/script&gt;</p><p class="source-code">    &lt;/body&gt;</p><p class="source-code">    &lt;style&gt;</p></li>
				<li>Finally, we <a id="_idIndexMarker624"/>will declare the CSS styles (<a href="https://www.w3.org/Style/CSS/Overview.en.html">https://www.w3.org/Style/CSS/Overview.en.html</a>) that we need for each of the sections. First, here is the style for the body of the web page:<p class="source-code">    body {</p><p class="source-code">          overflow: hidden;</p><p class="source-code">          position: absolute;</p><p class="source-code">          width: 100%;</p><p class="source-code">          height: 100%;</p><p class="source-code">          background: #404040;</p><p class="source-code">          top: 0;</p><p class="source-code">          margin: 0;</p><p class="source-code">          padding: 0;</p><p class="source-code">          -webkit-font-smoothing: antialiased;</p><p class="source-code">}</p></li>
				<li>The following is the style for the background and the background text widgets, which are called <strong class="source-inline">home</strong> and <strong class="source-inline">hometext</strong>:<p class="source-code">        #home {</p><p class="source-code">          width: 100%;</p><p class="source-code">          height: 80%;</p><p class="source-code">          bottom: 0;</p><p class="source-code">          background-color: #ff8c00;</p><p class="source-code">          color: #fff;</p><p class="source-code">          margin: 0px;</p><p class="source-code">          padding: 0;</p><p class="source-code">        }</p><p class="source-code">        #hometext {</p><p class="source-code">          top: 20%;</p><p class="source-code">          margin: 10px;</p><p class="source-code">          padding: 0;</p><p class="source-code">        }</p></li>
				<li>Finally, we will <a id="_idIndexMarker625"/>define the styles for each of the headings and paragraphs in our web page:<p class="source-code">        h1 {</p><p class="source-code">            text-align: center;</p><p class="source-code">            color: #fff;</p><p class="source-code">            font-family: 'Lato', sans-serif;</p><p class="source-code">        }</p><p class="source-code">        h2 {</p><p class="source-code">            text-align: center;</p><p class="source-code">            color: #fff;</p><p class="source-code">            font-family: 'Lato', sans-serif;</p><p class="source-code">        }</p><p class="source-code">        h3 {</p><p class="source-code">            text-align: center;</p><p class="source-code">            color: #fff;</p><p class="source-code">            font-family: 'Lato', sans-serif;</p><p class="source-code">        }</p><p class="source-code">        h4 {</p><p class="source-code">            font-family: 'Lato', sans-serif;</p><p class="source-code">        }</p><p class="source-code">        p {</p><p class="source-code">            font-family: 'Lato', sans-serif;</p><p class="source-code">        }</p><p class="source-code">        </p><p class="source-code">    &lt;/style&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li>Now, we will execute the cells in the <em class="italic">Prepare for Translation</em> section. Execute the first cell to <a id="_idIndexMarker626"/>install the HTML parser we need for our solution, called <strong class="source-inline">Beautiful Soup</strong> (<a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a>):<p class="source-code">!pip install beautifulsoup4</p></li>
				<li>Next, run the following cell to load our English HTML page code into a variable so that we can parse it using <strong class="source-inline">Beautiful Soup</strong>:<p class="source-code">html_doc = ''</p><p class="source-code">input_htm = './input/aboutLRH.html'</p><p class="source-code">with open(input_htm) as f:</p><p class="source-code">    content = f.readlines()</p><p class="source-code">for i in content:</p><p class="source-code">    html_doc += i+' '</p></li>
				<li>Now, parse the HTML page:<p class="source-code">from bs4 import BeautifulSoup</p><p class="source-code">soup = BeautifulSoup(html_doc, 'html.parser')</p></li>
				<li>Let's define <a id="_idIndexMarker627"/>the list of HTML tags we are interested in and load the text content for those HTML tags into a dictionary:<p class="source-code">tags = ['title','h1','h2','p']</p><p class="source-code">x_dict = {}</p><p class="source-code">for tag in tags:</p><p class="source-code">    x_dict[tag] = getattr(getattr(soup, tag),'string')</p><p class="source-code">x_dict</p></li>
				<li>We will get the following response:<p class="source-code">{'title': 'Live Well with LiveRight',</p><p class="source-code"> 'h1': 'Family Bank Holdings',</p><p class="source-code"> 'h2': 'Who we are and what we do',</p><p class="source-code"> 'p': "A wholly owned subsidiary of LiveRight, we are the nation's largest bank for SMB owners and cooperative societies, with more than 4500 branches spread across the nation, servicing more than 5 million customers and continuing to grow.\n           We offer a number of lending products to our customers including checking and savings accounts, lending, credit cards, deposits, insurance, IRA and more. Started in 1787 as a family owned business providing low interest loans for farmers struggling with poor harvests, LiveRight helped these farmers design long distance water channels from lakes in neighboring districts\n              to their lands. The initial success helped these farmers invest their wealth in LiveRight and later led to our cooperative range of products that allowed farmers to own a part of LiveRight.\n              In 1850 we moved our HeadQuarters to New York city to help build the economy of our nation by providing low interest lending products to small to medium business owners looking to start or expand their business.\n               From 2 branches then to 4500 branches today, the trust of our customers helped us grow to become the nation's largest SMB bank. "}</p></li>
				<li>Now, we will <a id="_idIndexMarker628"/>execute the cells in the <em class="italic">Translate to target languages</em> section. In the first cell, we will import the <strong class="source-inline">boto3</strong> library (<a href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html">https://boto3.amazonaws.com/v1/documentation/api/latest/index.html</a>), the Python SDK for AWS services, create a handle for Amazon Translate, and then translate our web page into our target languages:<p class="source-code">import boto3</p><p class="source-code">translate = boto3.client(service_name='translate', region_name='us-east-1', use_ssl=True)</p><p class="source-code">out_text = {}</p><p class="source-code">languages = ['de','es','ta','hi']</p><p class="source-code">for target_lang in languages:</p><p class="source-code">    out_dict = {}</p><p class="source-code">    for key in x_dict:</p><p class="source-code">        result = translate.translate_text(Text=x_dict[key], </p><p class="source-code">            SourceLanguageCode="en", TargetLanguageCode=target_lang)</p><p class="source-code">        out_dict[key] = result.get('TranslatedText')</p><p class="source-code">    out_text[target_lang] = out_dict</p></li>
				<li>Now, let's execute the cells in the <em class="italic">Build webpages for translated text</em> section. This section <a id="_idIndexMarker629"/>is split into four subsections – one for each target language. Execute the cells under <em class="italic">German Webpage</em>. The code assigns the HTML parser's output to a new variable, updates the HTML tag values with translated content from the preceding step, and then writes the complete HTML to an output HTML file for the language. For simplicity, the code from the four separate cells under this subsection is grouped like so:<p class="source-code">web_de = soup</p><p class="source-code">web_de.title.string = out_text['de']['title']</p><p class="source-code">web_de.h1.string = out_text['de']['h1']</p><p class="source-code">web_de.h2.string = out_text['de']['h2']</p><p class="source-code">web_de.p.string = out_text['de']['p']</p><p class="source-code">de_html = web_de.prettify()</p><p class="source-code">with open('./output/aboutLRH_DE.html','w') as de_w:</p><p class="source-code">    de_w.write(de_html)</p><p class="source-code">IFrame(src='./output/aboutLRH_DE.html', width=800, height=500)</p></li>
				<li>We will get the following output:<div id="_idContainer199" class="IMG---Figure"><img src="Images/B17528_10_05.jpg" alt="Figure 10.5 – The translated German web page&#13;&#10;" width="1590" height="849"/></div><p class="figure-caption">Figure 10.5 – The translated German web page</p></li>
				<li>Execute the cells under <em class="italic">Spanish Webpage</em>. The code assigns the HTML parser's output to a new variable, updates the HTML tag values with translated content from <a id="_idIndexMarker630"/>the preceding step, and then writes the complete HTML to an output HTML file for the language. For simplicity, the code from the four separate cells under this subsection is grouped, like so:<p class="source-code">web_es = soup</p><p class="source-code">web_es.title.string = out_text['es']['title']</p><p class="source-code">web_es.h1.string = out_text['es']['h1']</p><p class="source-code">web_es.h2.string = out_text['es']['h2']</p><p class="source-code">web_es.p.string = out_text['es']['p']</p><p class="source-code">es_html = web_es.prettify()</p><p class="source-code">with open('./output/aboutLRH_ES.html','w') as es_w:</p><p class="source-code">    es_w.write(es_html)</p><p class="source-code">IFrame(src='./output/aboutLRH_ES.html', width=800, height=500)</p></li>
				<li>We will get <a id="_idIndexMarker631"/>the following output:<div id="_idContainer200" class="IMG---Figure"><img src="Images/B17528_10_06.jpg" alt="Figure 10.6 – The translated Spanish web page&#13;&#10;" width="1570" height="854"/></div><p class="figure-caption">Figure 10.6 – The translated Spanish web page</p></li>
				<li>Execute the cells under <em class="italic">Hindi Webpage</em>. The code assigns the HTML parser's output to a new variable, updates the HTML tag values with translated content from the preceding step, and then writes the complete HTML to an output HTML file for the language. For simplicity, the code from the four separate cells under this subsection is grouped, like so:<p class="source-code">web_hi = soup</p><p class="source-code">web_hi.title.string = out_text['hi']['title']</p><p class="source-code">web_hi.h1.string = out_text['hi']['h1']</p><p class="source-code">web_hi.h2.string = out_text['hi']['h2']</p><p class="source-code">web_hi.p.string = out_text['hi']['p']</p><p class="source-code">hi_html = web_hi.prettify()</p><p class="source-code">with open('./output/aboutLRH_HI.html','w') as hi_w:</p><p class="source-code">    hi_w.write(hi_html)</p><p class="source-code">IFrame(src='./output/aboutLRH_HI.html', width=800, height=500)</p></li>
				<li>We will <a id="_idIndexMarker632"/>get the following output:<div id="_idContainer201" class="IMG---Figure"><img src="Images/B17528_10_07.jpg" alt="Figure 10.7 – The translated Hindi web page&#13;&#10;" width="1372" height="800"/></div><p class="figure-caption">Figure 10.7 – The translated Hindi web page</p></li>
				<li>Execute the cells under <em class="italic">Tamil Webpage</em>. The code assigns the HTML parser's output to a new variable, updates the HTML tag values with translated content from the <a id="_idIndexMarker633"/>preceding step, and then writes the complete HTML to an output HTML file for the language. For simplicity, the code from the four separate cells under this subsection is grouped, like so:<p class="source-code">web_ta = soup</p><p class="source-code">web_ta.title.string = out_text['ta']['title']</p><p class="source-code">web_ta.h1.string = out_text['ta']['h1']</p><p class="source-code">web_ta.h2.string = out_text['ta']['h2']</p><p class="source-code">web_ta.p.string = out_text['ta']['p']</p><p class="source-code">ta_html = web_ta.prettify()</p><p class="source-code">with open('./output/aboutLRH_TA.html','w') as ta_w:</p><p class="source-code">    ta_w.write(ta_html)</p><p class="source-code">IFrame(src='./output/aboutLRH_TA.html', width=800, height=500)</p></li>
				<li>We will get the following output:<div id="_idContainer202" class="IMG---Figure"><img src="Images/B17528_10_08.jpg" alt="Figure 10.8 – The translated Tamil web page&#13;&#10;" width="1577" height="886"/></div><p class="figure-caption">Figure 10.8 – The translated Tamil web page</p></li>
				<li>In some instances, you may see that custom brand names or product terms specific to your <a id="_idIndexMarker634"/>organization may not be translated into the required context in your target language. In these cases, use <strong class="bold">Amazon Translate Custom Terminology</strong> to ensure Amazon Translate can identify <a id="_idIndexMarker635"/>the context for these unique words. For more details, you can refer to the following documentation: <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html">https://docs.aws.amazon.com/translate/latest/dg/how-custom-terminology.html</a>.</li>
			</ol>
			<p>And that concludes the solution build for this chapter. As we mentioned previously, you can upload your web pages to an Amazon S3 bucket (<a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-uploading-files.html">https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-uploading-files.html</a>) and use Amazon CloudFront (<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-cloudfront-walkthrough.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-cloudfront-walkthrough.html</a>) to distribute your website globally in minutes. Further with support for translating 2 million characters per month for the first 12 months free of charge, and only $15 for every 1 million characters after that, your translation costs are significantly minimized. For additional ideas on how you can use Amazon Translate for your needs, please refer to the <em class="italic">Further reading</em> section.</p>
			<h1 id="_idParaDest-127"><a id="_idTextAnchor131"/>Summary</h1>
			<p>In this chapter, we learned how to build content localization for web pages quickly and in a highly cost-efficient way with Amazon Translate, an ML-based translation service that provides powerful machine translation models behind an API endpoint for ease of access. First, we reviewed a use case for our fictitious corporation, called <strong class="bold">LiveRight Holdings</strong>, which was looking to expand internationally and needed to launch its website in four different languages in 3 weeks. LiveRight did not have the time or funding to hire experienced translators to perform the website conversion manually. The director of IT at LiveRight hired you to devise a solution that's quick and cost-effective.</p>
			<p>For this, you designed a solution using Amazon Translate that used a Python HTML parser to extract the relevant tag content from the English version of the HTML page, translate it into German, Spanish, Hindi, and Tamil, and then create new HTML pages with the translated content included. To execute the solution, we created an Amazon SageMaker Jupyter notebook instance, assigned the IAM permissions for Amazon Translate to the notebook instance, cloned the GitHub repository for this chapter, and then walked through the solution by executing the code blocks one cell at a time. Finally, we displayed the HTML pages containing the translated content in the notebook for reviewing purposes.</p>
			<p>In the next chapter, we will look at an interesting use case, as well as an important application of NLP: building conversational interfaces using chatbots to work with a document's contents and provide this as a self-help tool for consumers. We will use <strong class="bold">LiveRight Holdings</strong> again to illustrate this use case, while specifically addressing the needs of the mortgage department officers who conduct homebuyer research for design product offerings. As we did in this chapter, we will introduce the use case, discuss how to design the architecture, establish the prerequisites, and walk through the various steps required to build the solution.</p>
			<h1 id="_idParaDest-128"><a id="_idTextAnchor132"/>Further reading</h1>
			<p>To learn more about the topics that were covered in this chapter, take a look at the following resources:</p>
			<ul>
				<li><em class="italic">Translating your website or application automatically with Amazon Translate in your CI/CD pipeline</em>, by Carlos Afonso (<a href="https://aws.amazon.com/blogs/machine-learning/translating-your-website-or-application-automatically-with-amazon-translate-in-your-ci-cd-pipeline/">https://aws.amazon.com/blogs/machine-learning/translating-your-website-or-application-automatically-with-amazon-translate-in-your-ci-cd-pipeline/</a>)</li>
				<li><em class="italic">Customizing your machine translation using Amazon Translate Active Custom Translation</em>, by Watson Srivathsan and Xingyao Wang (<a href="https://aws.amazon.com/blogs/machine-learning/customizing-your-machine-translation-using-amazon-translate-active-custom-translation/">https://aws.amazon.com/blogs/machine-learning/customizing-your-machine-translation-using-amazon-translate-active-custom-translation/</a>)</li>
				<li><em class="italic">Translate Text Between Languages in the Cloud</em> (<a href="https://aws.amazon.com/getting-started/hands-on/translate-text-between-languages-cloud/">https://aws.amazon.com/getting-started/hands-on/translate-text-between-languages-cloud/</a>)</li>
				<li><em class="italic">Translate video captions and subtitles using Amazon Translate</em>, by Siva Rajamani and Raju Penmatcha (https://aws.amazon.com/blogs/machine-learning/translate-video-captions-and-subtitles-using-amazon-translate/)</li>
				<li><em class="italic">The World Is Flat</em> (<a href="https://www.amazon.com/World-Flat-History-Twenty-first-Century/dp/0374292884">https://www.amazon.com/World-Flat-History-Twenty-first-Century/dp/0374292884</a>)</li>
			</ul>
		</div>
	</div></body></html>